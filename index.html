<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <title>Sai Ashray Crackers 🎆</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="site-header">
    <div class="top-banner">
      <h1 class="brand-title">🪔 Sai Ashray FireCrackers 🪔</h1>
      <div class="discount-badge">✨ <span>Flat 10% OFF</span> ✨</div>
    </div>
  </header>

  <div class="delivery-banner">
    🚚 <strong>Free Delivery</strong> on Orders Above ₹500
  </div>

  <section class="controls">
    <input id="searchInput" type="search" placeholder="Search crackers..." />
    <div id="categoryScroll" class="category-scroll"></div>
  </section>

  <main>
    <section class="products" id="productsGrid"></section>
  </main>

  <footer class="cart-footer">
    <div id="cartSummary">🛒 Items: 0 | Total: ₹0</div>
    <button id="openCart" class="checkout-btn">Checkout</button>
  </footer>

  <!-- Checkout Modal -->
  <div id="checkoutModal" class="modal hidden">
    <div class="modal-content">
      <button id="closeModal" class="modal-close" aria-label="Close">✕</button>
      <h2 class="modal-title">Quotation Summary</h2>

      <p id="orderDate" class="quote-date"></p>

      <form id="checkoutForm">
        <div class="customer-grid">
          <label>Full Name* <input id="custName" required /></label>
          <label>Mobile Number* <input id="custPhone" type="tel" required /></label>
          <label>WhatsApp Number* <input id="custWhats" type="tel" required /></label>
          <label>Address* <textarea id="custAddress" required></textarea></label>
        </div>

        <div class="order-summary">
          <table class="quote-table" aria-label="Order summary">
            <thead>
              <tr>
                <th>Product</th>
                <th>Qty</th>
                <th>Price (₹)</th>
                <th>Total (₹)</th>
              </tr>
            </thead>
            <tbody id="orderBody"></tbody>
          </table>
        </div>

        <div class="totals-grid">
          <div>Subtotal: <strong>₹<span id="subtotalAmount">0</span></strong></div>
          <div>Discount (10%): <strong>₹<span id="discountAmount">0</span></strong></div>
          <div class="grand">Grand Total: <strong>₹<span id="finalTotal">0</span></strong></div>
        </div>

        <div class="modal-actions">
          <button type="button" id="cancelCheckout">← Back</button>
          <button type="submit" id="confirmOrder">Confirm & WhatsApp</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Footer Credit -->
  <footer class="footer-credit">
    <p>© 2025 Designed & Maintained by <strong>Team ASRC</strong></p>
  </footer>

  <!-- Visitor Counter (styled same as footer) -->
<div id="visitorCounter" 
     style="text-align:center;
            font-size:0.85rem;
            color:#555;
            background:#fff8f0;
            border-top:1px solid #e0d6b5;
            padding:8px 0;
            font-family:'Poppins', sans-serif;">
  👁️‍🗨️ Loading visitor count...
</div>


  <script src="products.js"></script>
  <script src="app.js"></script>

  <!-- Visitor Counter Script -->
  <script>
    (function() {
      const apiUrl = "https://api.countapi.xyz";
      const namespace = "saiashrayfirecrackers.vercel";
      const key = "visitor_count";
      const storageKey = "visited_once";
      const el = document.getElementById("visitorCounter");

      async function updateCount() {
        try {
          if (!localStorage.getItem(storageKey)) {
            await fetch(`${apiUrl}/hit/${namespace}/${key}`);
            localStorage.setItem(storageKey, "true");
          }
          const res = await fetch(`${apiUrl}/get/${namespace}/${key}`);
          const data = await res.json();
          const count = data.value || 1;
          el.textContent = `👁️‍🗨️ ${count.toLocaleString()} people have visited this site.`;
        } catch (err) {
          el.textContent = "👁️‍🗨️ Visitors data unavailable.";
          console.error(err);
        }
      }
      updateCount();
    })();
  </script>
</body>
</html>
